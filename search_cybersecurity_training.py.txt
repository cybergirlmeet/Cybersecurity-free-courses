import os
import requests
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

API_KEY = os.getenv('API_KEY')
CSE_ID = os.getenv('CSE_ID')

def google_search(query, api_key, cse_id, **kwargs):
    url = f"https://www.googleapis.com/customsearch/v1"
    params = {
        'q': query,
        'key': api_key,
        'cx': cse_id,
        **kwargs
    }
    response = requests.get(url, params=params)
    return response.json()

def extract_links(search_results):
    links = []
    for item in search_results.get('items', []):
        links.append(item['link'])
    return links

def main():
    query = 'free cybersecurity training'
    search_results = google_search(query, API_KEY, CSE_ID, num=10)
    links = extract_links(search_results)
    
    print("Free Cybersecurity Training Links:")
    for link in links:
        print(link)

if __name__ == "__main__":
    main()
